
windowrule = tag +terminal, class:^(Alacritty|kitty|kitty-dropterm)$
# game tags
windowrule = tag +games, class:^(gamescope)$
windowrule = tag +games, class:^(steam_app_\d+)$
windowrule = tag +games, class:.*Vulkan.*

# gamestore tags
windowrule = tag +gamestore, class:^([Ss]team)$
windowrule = tag +gamestore, title:^([Ll]utris)$
windowrule = tag +gamestore, class:^(com.heroicgameslauncher.hgl)$

# project tags
windowrule = tag +projects, class:^(codium|codium-url-handler|VSCodium)$
windowrule = tag +projects, class:^(VSCode|code-url-handler)$
windowrule = tag +projects, class:^(jetbrains-.+)$ # JetBrains IDEs

# windowrule move to workspace
windowrule = workspace 1, tag:email*
windowrule = workspace 2, tag:browser*
#windowrule = workspace 3, class:^([Tt]hunar)$
#windowrule = workspace 3, tag:projects*
windowrule = workspace 5, tag:gamestore*
windowrule = workspace 7, tag:im*
windowrule = workspace 8, tag:games*


# Applets
windowrule = float, class:^(blueman-manager)$
windowrule = size 600 400, class:^(blueman-manager)$
windowrule = float, class:^(org.pulseaudio.pavucontrol)$
windowrule = size 1200 600, class:^(org.pulseaudio.pavucontrol)$


$apps = title:^(.*mpv.*)$|^(.*nwg-look.*)$|^(.*Ark.*)$|^(.*KeePassXC.*)$|^(.*Waypaper.*)$|^(.*Kvantum Manager.*)$|^(.*Elisa.*)$
windowrule = float, $apps
windowrule = center 1, $apps

######################################
# 3. SPECIFIC FLOAT + CENTERED APPS  #
######################################
$center-float-title = class:(org.gnome.Loupe)|(io.missioncenter.MissionCenter)|(org.kde.dolphin)|(mpv)|(com.github.th_ch.youtube_music)|(org.qbittorrent.qBittorrent)|(btrfs-assistant)|(qt6ct)

windowrule = float, $center-float-title
windowrule = center, $center-float-title

#########################
# 4. FILE DIALOG FLOATS #
#########################
$center-float-dialogs = title:^(.*Open Folder.*)$|^(.*Open File.*)$|^(.*Save File.*)$|^(.*Save Folder.*)$|^(.*Save Image.*)$|^(.*Save As.*)$|^(.*Open As.*)$|^(.*Select file.*)$|^(.*Select folder.*)$|^(.*Open Archive.*)$|^(.*wants to save.*)$
windowrule = float, $center-float-dialogs
windowrule = center 1, $center-float-dialogs
# windowrule = size 50% 50%, $center-float-dialogs

# General floating
# windowrule = float,class:(floating)
#
# # This fixes the blur under chrome's context menu
# windowrule = noblur, class:^()$, title:^()$
# windowrule = opaque, class:^()$, title:^()$
# windowrule = noblur, class:^()$, title:^()$
# windowrule = norounding, class:^()$, title:^()$

workspace = w[tv1], gapsout:0, gapsin:0
workspace = f[1], gapsout:0, gapsin:0
windowrule = bordersize 0, floating:0, onworkspace:w[tv1]
windowrule = rounding 0, floating:0, onworkspace:w[tv1]
windowrule = bordersize 0, floating:0, onworkspace:f[1]
windowrule = rounding 0, floating:0, onworkspace:f[1]



#########################################
# 9. FLOAT POPUPS / DIALOG OVERRIDE FIX #
#########################################
windowrule = float, class:^(com.heroicgameslauncher.hgl)$, title:negative:(Heroic Games Launcher)
windowrule = float, class:steam, title:negative:Steam

# idleinhibit
windowrule = idleinhibit fullscreen,class:([window]) # Available modes: none, always, focus, fullscreen

#################################
# 11. BLUR + FULLSCREEN BEHAVIOR #
#################################
windowrule = noblur, tag:games*
windowrule = fullscreen, tag:games*

# --- Tearing ---
windowrule = immediate, class:^(kitty)$
windowrule = immediate, tag:games*
# window
windowrule = tag +multimedia_video, class:^(mpv|vlc)$

# Some special override rules
windowrule = noblur, tag:multimedia_video*
windowrule = opacity 1.0, tag:multimedia_video*rule = content:game, tag:games*
windowrule = pin, title:^(Picture-in-Picture)$
windowrule = keepaspectratio, title:^(Picture-in-Picture)$


# LAYER RULES
layerrule = blur, rofi
layerrule = ignorezero, rofi

# Notifications
layerrule = blur, notifications
layerrule = ignorezero, notifications

# SwayNC Control Center
layerrule = blur, swaync-control-center
layerrule = ignorezero, swaync-control-center
layerrule = ignorealpha 0.5, swaync-control-center

# Unified SwayNC
layerrule = blur, swaync-*
layerrule = ignorezero, swaync-*
layerrule = ignorealpha 0.5, swaync-*

# terminal tags

# JetBrains IDEs (PyCharm, IntelliJ, WebStorm, etc.) â€“ fix tab dragging + split
# windowrulev2 = float,          class:^(jetbrains-.*)$, title:^(win.*)$
# windowrulev2 = stayfocused,    class:^(jetbrains-.*)$
# windowrulev2 = noinitialfocus, class:^(jetbrains-.*)$
# windowrulev2 = noborder,       class:^(jetbrains-.*)$, title:^(win.*)$
# windowrulev3 = center,         class:^(jetbrains-.*)$, title:^(win.*)$
layerrule = blur, waybar  # Or "blurls = waybar" in older versions
layerrule = ignorealpha 0.8, waybar  # Ignore low-opacity regions (0.5-0.9)


# --- JetBrains IDE Fixes (IntelliJ, PyCharm, etc.) ---

# 1. Prevent popups/dialogs from stealing focus immediately, which causes
#    them to lose focus or flicker as Hyprland tries to refocus the main window.
#    The rule targets any window class starting with 'jetbrains-' and makes it
#    float with no initial focus.

# 2. Make floating JetBrains dialogs "stay focused" and center them.
#    This helps with dialogs like "Find in Files" (Ctrl+Shift+F) or "Search Everywhere" (Double Shift).
# windowrulev2 = stayfocused, class:^jetbrains-.+$, floating:1
# windowrulev2 = center, class:^jetbrains-.+$, floating:1

# 3. Optional: Fix for certain floating popups disappearing when the mouse moves.
#    This prevents the cursor leaving the floating window from automatically
#    refocusing the main window. Try setting this on your input section.
